{% extends "base.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='lab8/lab8.css') }}">
{% endblock %}

{% block lab %}Лабораторная работа 8{% endblock %}

{% block main %}
    <div class="lab8-main">
        <div class="lab8-header">Результаты поиска</div>
        
        <div style="margin-bottom: 20px; color: #444;">
            По запросу: <strong>"{{ search_query }}"</strong>
            {% if count > 0 %}
                <span style="color: #666;"> (найдено: {{ count }})</span>
            {% endif %}
        </div>
        
        {% if results %}
            <div class="lab8-search-results">
                {% for article in results %}
                <div class="lab8-search-result">
                    <h3>{{ article.title }}</h3>
                    <p>{{ article.article_text[:200] }}{% if article.article_text|length > 200 %}...{% endif %}</p>
                    
                    <div class="lab8-search-meta">
                        {% if article.is_public %}
                            <span class="lab8-meta-badge lab8-meta-public" style="font-size: 11px;">Публичная</span>
                        {% else %}
                            <span style="color: #777; font-size: 12px;">Личная</span>
                        {% endif %}
                        {% if article.is_favorite %}
                            <span class="lab8-meta-badge lab8-meta-favorite" style="font-size: 11px;">Избранная</span>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="lab8-message">
                По запросу "{{ search_query }}" ничего не найдено.
            </div>
        {% endif %}
        
        <div style="text-align: center; margin-top: 20px;">
            <a href="/lab8/articles/search" class="lab8-btn">Новый поиск</a>
            <a href="/lab8/" class="lab8-btn lab8-btn-secondary" style="margin-left: 10px;">К лабораторной</a>
        </div>
    </div>
{% endblock %}