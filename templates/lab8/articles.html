{% extends "base.html" %}

{% block styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='lab8/lab8.css') }}">
{% endblock %}

{% block lab %}Лабораторная работа 8{% endblock %}

{% block main %}
    <div class="lab8-main">
        <div class="lab8-header">Мои статьи</div>
        
        <div style="margin-bottom: 25px;">
            <a href="/lab8/create" class="lab8-btn">
                Создать статью
            </a>
        </div>
        
        {% if articles %}
            <div class="lab8-articles">
                {% for article in articles %}
                <div class="lab8-article">
                    <h3>{{ article.title }}</h3>
                    <p>{{ article.article_text[:150] }}{% if article.article_text|length > 150 %}...{% endif %}</p>
                    
                    <div class="lab8-article-meta">
                        {% if article.is_public %}
                            <span class="lab8-meta-badge lab8-meta-public">Публичная</span>
                        {% endif %}
                        {% if article.is_favorite %}
                            <span class="lab8-meta-badge lab8-meta-favorite">Избранная</span>
                        {% endif %}
                    </div>
                    
                    <div class="lab8-article-actions">
                        <a href="/lab8/edit/{{ article.id }}" class="lab8-btn">Редактировать</a>
                        <a href="/lab8/delete/{{ article.id }}" class="lab8-btn lab8-btn-danger" 
                           onclick="return confirm('Удалить статью «{{ article.title }}»?')">
                            Удалить
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="lab8-message">
                У вас пока нет статей.
                <div style="margin-top: 15px;">
                    <a href="/lab8/create" class="lab8-btn">Создать первую статью</a>
                </div>
            </div>
        {% endif %}
        
        <div style="text-align: center; margin-top: 30px;">
            <a href="/lab8/" class="lab8-btn">На главную</a>
        </div>
    </div>
{% endblock %}